<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>–ú–∞–≥–∞–∑–∏–Ω:</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  body {
    font-family: sans-serif;
    background-color: var(--tg-theme-bg-color);
    color: var(--tg-theme-text-color);
    padding: 20px;
  }
  button {
    margin: 5px 0;
    padding: 10px;
    width: 100%;
    font-size: 16px;
  }
</style>
</head>
<body>

<h2>–ú–∞–≥–∞–∑–∏–Ω üõí</h2>
<p>–ë–∞–ª–∞–Ω—Å: <span id="balance">–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>üî©</p>

<div id="items"></div>

<script>
  const tg = window.Telegram.WebApp;

  // –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –∑ URL-–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
  const urlParams = new URLSearchParams(window.location.search);

  let balance = Number(urlParams.get('balance')) || 0;  // —è–∫—â–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤—ñ–¥—Å—É—Ç–Ω—ñ–π - 0
  let inventory = {
    change_card: Number(urlParams.get('change_card')) || 0,
    inventory_card: Number(urlParams.get('inventory_card')) || 0,
    rn_change_card: Number(urlParams.get('rn_change_card')) || 0,
    ch_change_card: Number(urlParams.get('ch_change_card')) || 0
  };

  // –î–∞–ª—ñ –æ–Ω–æ–≤–ª—é—î–º–æ UI –∑ —Ü–∏–º–∏ –¥–∞–Ω–∏–º–∏
  document.getElementById('balance').innerText = balance;

  const shopItems = [
    {id: 50, name: "–ó–º—ñ–Ω–∏—Ç–∏ –∫–∞—Ä—Ç–∫—É ü™™", key: "change_card"},
    {id: 70, name: "–ë–æ–Ω—É—Å–Ω–∏–π —ñ–Ω–≤–µ–Ω—Ç–∞—Ä üéí", key: "inventory_card"},
    {id: 40, name: "–í–∏–ø–∞–¥–∫–æ–≤–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ üîÅ", key: "rn_change_card"},
    {id: 100, name: "–î–æ–≤—ñ–ª—å–Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ ‚úèÔ∏è", key: "ch_change_card"},
  ];

  // –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –±–∞–ª–∞–Ω—Å
  function updateBalance() {
    document.getElementById("balance").innerText = balance;
  }

  // –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ —Ç–æ–≤–∞—Ä–∏
  function showItems() {
    const container = document.getElementById("items");
    container.innerHTML = "";
    shopItems.forEach(item => {
      const btn = document.createElement("button");
      btn.innerText = `${item.name} ‚Äî ${item.id}üî©`;
      btn.onclick = () => buyItem(item.id, item.key);
      container.appendChild(btn);
    });
  }

  // –§—É–Ω–∫—Ü—ñ—è –ø–æ–∫—É–ø–∫–∏
  function buyItem(price, key) {
    if (balance < price) {
      alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ ${price - balance}üî© –¥–ª—è –ø–æ–∫—É–ø–∫–∏`);
      return;
    }
    // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –¥–∞–Ω—ñ –≤ –±–æ—Ç
    tg.sendData(JSON.stringify({action: "buy", price: price, key: key}));
  }

  function init() {
    updateBalance();
    showItems();
  }

  init();
</script>

</body>
</html>